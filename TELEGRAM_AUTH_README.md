# üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º deep links –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### ‚úÖ –°–æ–∑–¥–∞–Ω–æ:

#### Backend (3 —Ñ—É–Ω–∫—Ü–∏–∏):
1. **`telegram-auth-init`** ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞
   - URL: `https://functions.poehali.dev/f6014b74-431e-4d03-9e6e-e27621c39bf5`

2. **`telegram-auth-verify`** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - URL: `https://functions.poehali.dev/65fdf841-ac48-4f1e-aff3-1b6c810838cc`

3. **`telegram-webhook`** (–æ–±–Ω–æ–≤–ª—ë–Ω) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start AUTH_xxx` –∏ callback –∫–Ω–æ–ø–∫–∏
   - URL: `https://functions.poehali.dev/8b815ea6-d517-4175-acb3-4e819045c985`

#### Frontend (3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞):
1. **`TelegramLoginButton`** ‚Äî –∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram" —Å polling
2. **`AuthMethodSelector`** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥–∞
3. **`Auth.tsx`** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π —Ñ–ª–æ—É —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- –¢–∞–±–ª–∏—Ü–∞ `telegram_auth_sessions` –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (5 –º–∏–Ω—É—Ç TTL)

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è –ù–û–í–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```
1. [–°–∞–π—Ç] ‚Üí –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram" (—Å–∏–Ω—è—è)
2. [–°–∞–π—Ç] ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram –±–æ—Ç
3. [Telegram] ‚Üí –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "GruzClick –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–∏–º –¥–∞–Ω–Ω—ã–º: ‚úÖ –ò–º—è..."
4. [Telegram] ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—Ö–æ–¥"
5. [–°–∞–π—Ç] ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ —ç—Ç–æ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
6. [–°–∞–π—Ç] ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ù–´–ú –§–ò–û
7. [–°–∞–π—Ç] ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç: —Ç–µ–ª–µ—Ñ–æ–Ω, —Ç–∏–ø (–∫–ª–∏–µ–Ω—Ç/–ø–µ—Ä–µ–≤–æ–∑—á–∏–∫/–ª–æ–≥–∏—Å—Ç), –ø–∞—Å–ø–æ—Ä—Ç
8. [–°–∞–π—Ç] ‚Üí –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç RoleSelectionModal (–≤—ã–±–æ—Ä —Ä–æ–ª–∏)
9. [–°–∞–π—Ç] ‚Üí –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!
```

### –î–ª—è –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```
1. [–°–∞–π—Ç] ‚Üí –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram"
2. [Telegram] ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—Ö–æ–¥
3. [–°–∞–π—Ç] ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º!)
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–≥–¥–µ —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞).

### –®–∞–≥ 2: –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram"
–í—ã —É–≤–∏–¥–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É —Å –∏–∫–æ–Ω–∫–æ–π Telegram.

### –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤ –±–æ—Ç–µ
- –û—Ç–∫—Ä–æ–µ—Ç—Å—è Telegram –±–æ—Ç `@gruzclick_2fa_bot`
- –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- –ù–∞–∂–º–∏—Ç–µ "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—Ö–æ–¥"

### –®–∞–≥ 4: –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç
–°–∞–π—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∏ –ø–æ–∫–∞–∂–µ—Ç:
- **–ï—Å–ª–∏ –≤—ã –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –§–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –§–ò–û
- **–ï—Å–ª–∏ –≤—ã —É–∂–µ –µ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ:** –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!

---

## üîë –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üéØ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
- **–§–ò–û** ‚Äî –±–µ—Ä—ë—Ç—Å—è –∏–∑ `first_name + last_name` Telegram
- **Username** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏
- **Chat ID** ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≥—Ä—É–∑–∞—Ö

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –¢–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç **5 –º–∏–Ω—É—Ç**
- –¢–æ–∫–µ–Ω—ã **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ** (–ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è)
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL (–Ω–µ –≤ –ø–∞–º—è—Ç–∏)

### üì± –ù–æ–≤—ã–µ —Ç–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å:
- **–ö–ª–∏–µ–Ω—Ç** ‚Äî –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥—Ä—É–∑
- **–ü–µ—Ä–µ–≤–æ–∑—á–∏–∫** ‚Äî –µ—Å—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- **–õ–æ–≥–∏—Å—Ç** ‚Äî –æ—Ä–≥–∞–Ω–∏–∑—É—é –ø–µ—Ä–µ–≤–æ–∑–∫–∏ (–ù–û–í–û–ï!)

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–¢—Ä–µ–±—É–µ—Ç—Å—è username –≤ Telegram** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ username –º–æ–≥—É—Ç –≤–æ–π—Ç–∏, –Ω–æ –Ω–µ –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –∫–æ–¥—ã (—Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥)
2. **Polling –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ** ‚Äî –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ WebSocket)
3. **–ë–µ–∑ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è** ‚Äî –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **Backend —Ñ—É–Ω–∫—Ü–∏–π:** 3 (–≤—Å–µ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã)
- **Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 3 (–æ–±–Ω–æ–≤–ª–µ–Ω—ã/—Å–æ–∑–¥–∞–Ω—ã)
- **–ú–∏–≥—Ä–∞—Ü–∏–π –ë–î:** 1 (—Ç–∞–±–ª–∏—Ü–∞ telegram_auth_sessions)
- **–¢–µ—Å—Ç–æ–≤:** 3 (–≤—Å–µ –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ Telegram –∑–∞ **2 –∫–ª–∏–∫–∞** –≤–º–µ—Å—Ç–æ –≤–≤–æ–¥–∞ email/–ø–∞—Ä–æ–ª—è!

–•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å? –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ! üöÄ
